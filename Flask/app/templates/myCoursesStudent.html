<!-- course view for students -->

{% extends "base.html" %}
{% block header %}
{% include "studentHeader.html" %}
{% endblock %}

{% block main %}
<div class="container mt-4">
    <div class="row row-cols-1 row-cols-md-4 g-4">
      {% for course in courses %}
      <div class="col">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title">{{ course.course_code }}</h5>
            <p class="card-text">{{ course.course_name }}</p>
            <div class="d-flex justify-content-between">
                <a href="#" class="btn btn-primary">View</a>
                
                <button class="btn btn-danger" onclick="confirmDrop('{{ course.course_code }}', '{{ session["user_id"] }}')">Drop</button>
            </div>
          </div>
        </div>  
      </div>
      {% endfor %}
    </div>
</div>
{% endblock %}

{% block css %}
<style>
    .btn {
        width: 100px;
    }
</style>
{% endblock %}

{% block js %}
<script>
  function confirmDrop(courseCode, user_id) {
      if (confirm('Are you sure you want to drop the course ' + courseCode + '?')) {
          // If the user confirms, redirect to the "drop_course" route
          window.location.href = '/drop_course/' + courseCode;
      } else {
          // If the user cancels, redirect to the "view_course_by_student" route
          window.location.href = '/courses/student/'+ user_id;
      }
  }
</script>
{% endblock %}
